"use strict";(self.webpackChunkMovieApp=self.webpackChunkMovieApp||[]).push([[476],{6476:(b,u,i)=>{i.r(u),i.d(u,{Login:()=>h});var g=i(467),n=i(4341),d=i(2200),l=i(3659),e=i(3664),m=i(8886);function _(o,c){1&o&&(e.j41(0,"div",18),e.EFF(1," Valid email is required "),e.k0s())}function f(o,c){1&o&&(e.j41(0,"div",18),e.EFF(1," Password is required "),e.k0s())}function p(o,c){if(1&o&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.successMessage," ")}}function v(o,c){if(1&o&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}let h=(()=>{class o{fb;auth;router;loginForm;submitted=!1;successMessage="";errorMessage="";constructor(t,s,r){this.fb=t,this.auth=s,this.router=r,this.loginForm=this.fb.group({email:["",[n.k0.required,n.k0.email]],password:["",n.k0.required]})}get f(){return this.loginForm.controls}goToRegister(){this.router.navigate(["/register"])}onSubmit(){var t=this;return(0,g.A)(function*(){if(t.submitted=!0,t.successMessage="",t.errorMessage="",t.loginForm.invalid)return;const{email:s,password:r}=t.loginForm.value;try{yield(0,l.x9)(t.auth,s,r),t.successMessage="Logged in successfully! Redirecting...",setTimeout(()=>{t.successMessage="",t.router.navigate(["/home"])},1e3)}catch(a){t.errorMessage="auth/user-not-found"===a.code||"auth/wrong-password"===a.code||"auth/invalid-credential"===a.code?"Incorrect email or password":"An unexpected error occurred"}})()}onForgotPassword(){var t=this;return(0,g.A)(function*(){const s=t.loginForm.get("email")?.value;if(s)try{yield(0,l.J1)(t.auth,s),t.successMessage="A password reset link has been sent to your email.",t.errorMessage=""}catch(r){t.successMessage="",t.errorMessage="auth/user-not-found"===r.code?"No user found with this email.":"auth/invalid-email"===r.code?"Please enter a valid email address.":"Something went wrong. Please try again."}else t.errorMessage="Please enter your email to reset your password."})()}static \u0275fac=function(s){return new(s||o)(e.rXU(n.ok),e.rXU(l.Nj),e.rXU(m.Ix))};static \u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:28,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","p-4","shadow","rounded-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-4","text-warning"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-warning","w-100","text-dark"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-center","mt-2"],[1,"text-center","mb-4"],["href","#",1,"forgot-link","text-decoration-none","text-secondary","small",3,"click"],[1,"d-flex","justify-content-center","align-items-center","mt-3"],[1,"me-2"],[1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Login"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(5,"div",4)(6,"label",5),e.EFF(7,"Email"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,_,2,0,"div",7),e.k0s(),e.j41(10,"div",4)(11,"label",5),e.EFF(12,"Password"),e.k0s(),e.nrm(13,"input",8),e.DNE(14,f,2,0,"div",7),e.k0s(),e.j41(15,"button",9),e.EFF(16,"Login"),e.k0s(),e.DNE(17,p,2,1,"div",10)(18,v,2,1,"div",11),e.k0s(),e.j41(19,"div",12)(20,"div",13)(21,"a",14),e.bIt("click",function(M){return r.onForgotPassword(),M.preventDefault()}),e.EFF(22," Forgot password? "),e.k0s(),e.j41(23,"div",15)(24,"span",16),e.EFF(25,"Don't have an account?"),e.k0s(),e.j41(26,"button",17),e.bIt("click",function(){return r.goToRegister()}),e.EFF(27," Sign up "),e.k0s()()()()()()),2&s&&(e.R7$(4),e.Y8G("formGroup",r.loginForm),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.email.errors),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.password.errors),e.R7$(3),e.Y8G("ngIf",r.successMessage),e.R7$(),e.Y8G("ngIf",r.errorMessage))},dependencies:[n.YN,n.qT,n.me,n.BC,n.cb,n.X1,n.j4,n.JD,d.MD,d.bT],styles:["body[_ngcontent-%COMP%], [_nghost-%COMP%]{background:var(--bg-color);color:var(--text-color)}[_nghost-%COMP%]{transition:background .3s,color .3s}.forgot-link[_ngcontent-%COMP%]{color:#6c757d;text-decoration:none;cursor:pointer}.forgot-link[_ngcontent-%COMP%]:hover{color:#ffc107;text-decoration:underline}",".forgot-link[_ngcontent-%COMP%]{color:#6c757d;text-decoration:none;cursor:pointer}.forgot-link[_ngcontent-%COMP%]:hover{color:#ffc107!important;text-decoration:underline!important}"]})}return o})()}}]);