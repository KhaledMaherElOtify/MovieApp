"use strict";(self.webpackChunkMovieApp=self.webpackChunkMovieApp||[]).push([[756],{7756:(P,d,a)=>{a.r(d),a.d(d,{Register:()=>R});var f=a(467),i=a(4341),c=a(2200),g=a(3659),m=a(4262),e=a(3664),_=a(8886);function v(s,n){1&s&&(e.j41(0,"div",16),e.EFF(1," Name is required "),e.k0s())}function p(s,n){1&s&&(e.j41(0,"div",16),e.EFF(1," Valid email is required "),e.k0s())}function E(s,n){1&s&&(e.j41(0,"div",16),e.EFF(1," Password must be at least 6 characters "),e.k0s())}function F(s,n){1&s&&(e.j41(0,"div",16),e.EFF(1," Confirm Password is required "),e.k0s())}function b(s,n){1&s&&(e.j41(0,"div",16),e.EFF(1," Passwords do not match "),e.k0s())}function h(s,n){if(1&s&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.SpI(" ",r.successMessage," ")}}function M(s,n){if(1&s&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.SpI(" ",r.errorMessage," ")}}let R=(()=>{class s{fb;auth;firestore;router;registerForm;submitted=!1;successMessage="";errorMessage="";constructor(r,o,t,l){this.fb=r,this.auth=o,this.firestore=t,this.router=l,this.registerForm=this.fb.group({name:["",i.k0.required],email:["",[i.k0.required,i.k0.email]],password:["",[i.k0.required,i.k0.minLength(6)]],confirmPassword:["",i.k0.required]},{validators:this.passwordMatchValidator})}get f(){return this.registerForm.controls}passwordMatchValidator(r){const o=r.get("password")?.value,t=r.get("confirmPassword")?.value;return o===t?null:{mismatch:!0}}onSubmit(){var r=this;return(0,f.A)(function*(){if(r.submitted=!0,r.successMessage="",r.errorMessage="",r.registerForm.invalid)return;const{name:o,email:t,password:l}=r.registerForm.value;try{const k=(yield(0,g.eJ)(r.auth,t,l)).user.uid;yield(0,m.BN)((0,m.H9)(r.firestore,"users",k),{name:o,email:t,createdAt:new Date}),r.successMessage="Account created successfully!",setTimeout(()=>{r.successMessage="",r.registerForm.reset(),r.submitted=!1,r.router.navigate(["/login"])},2e3)}catch(u){r.errorMessage="auth/email-already-in-use"===u.code?"This email already exists.":"An error occurred. Please try again.",console.error("Registration error:",u)}})()}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(o){return new(o||s)(e.rXU(i.ok),e.rXU(g.Nj),e.rXU(m._7),e.rXU(_.Ix))};static \u0275cmp=e.VBU({type:s,selectors:[["app-register"]],decls:36,vars:8,consts:[[1,"d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","p-4","shadow","rounded-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-4","text-warning"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["type","email","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-warning","w-100","text-dark"],[1,"text-center","mt-3"],["type","button",1,"btn","btn-outline-warning","btn-sm","mt-2",3,"click"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(o,t){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Register"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",4)(6,"label",5),e.EFF(7,"Name"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,v,2,0,"div",7),e.k0s(),e.j41(10,"div",4)(11,"label",5),e.EFF(12,"Email"),e.k0s(),e.nrm(13,"input",8),e.DNE(14,p,2,0,"div",7),e.k0s(),e.j41(15,"div",4)(16,"label",5),e.EFF(17,"Password"),e.k0s(),e.nrm(18,"input",9),e.DNE(19,E,2,0,"div",7),e.k0s(),e.j41(20,"div",4)(21,"label",5),e.EFF(22,"Confirm Password"),e.k0s(),e.nrm(23,"input",10),e.DNE(24,F,2,0,"div",7)(25,b,2,0,"div",7),e.k0s(),e.j41(26,"button",11),e.EFF(27,"Register"),e.k0s(),e.j41(28,"div",12)(29,"span"),e.EFF(30,"Already have an account?"),e.k0s(),e.nrm(31,"br"),e.j41(32,"button",13),e.bIt("click",function(){return t.goToLogin()}),e.EFF(33," Login\n"),e.k0s()(),e.DNE(34,h,2,1,"div",14)(35,M,2,1,"div",15),e.k0s()()()),2&o&&(e.R7$(4),e.Y8G("formGroup",t.registerForm),e.R7$(5),e.Y8G("ngIf",t.submitted&&t.f.name.errors),e.R7$(5),e.Y8G("ngIf",t.submitted&&t.f.email.errors),e.R7$(5),e.Y8G("ngIf",t.submitted&&t.f.password.errors),e.R7$(5),e.Y8G("ngIf",t.submitted&&t.f.confirmPassword.errors),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.registerForm.errors?null:t.registerForm.errors.mismatch)),e.R7$(9),e.Y8G("ngIf",t.successMessage),e.R7$(),e.Y8G("ngIf",t.errorMessage))},dependencies:[i.YN,i.qT,i.me,i.BC,i.cb,c.MD,c.bT,i.X1,i.j4,i.JD],styles:["body[_ngcontent-%COMP%], [_nghost-%COMP%]{background:var(--bg-color)!important;color:var(--text-color)!important}[_nghost-%COMP%]{transition:background .3s,color .3s}"]})}return s})()}}]);