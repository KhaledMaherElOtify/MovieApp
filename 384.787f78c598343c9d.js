"use strict";(self.webpackChunkMovieApp=self.webpackChunkMovieApp||[]).push([[384],{8384:(E,d,s)=>{s.r(d),s.d(d,{Home:()=>O});var h=s(2200),l=s(4341),_=s(8132),e=s(3664),c=s(8728),m=s(9330),u=s(5014),p=s(7410),f=s(2821);const v=i=>["/details",i];function P(i,g){if(1&i&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&i){const t=g.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function M(i,g){if(1&i){const t=e.RV6();e.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"a",19),e.nrm(4,"img",20),e.k0s(),e.j41(5,"span",21),e.EFF(6),e.nI1(7,"number"),e.k0s()(),e.j41(8,"div",22)(9,"h6",23),e.EFF(10),e.k0s(),e.j41(11,"div",24)(12,"small",25),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"i",26),e.bIt("click",function(){const r=c.eBV(t).$implicit,o=e.XpG();return c.Njj(o.toggleWishlist(r))}),e.k0s()()()()()}if(2&i){const t=g.$implicit,n=e.XpG();e.R7$(3),e.Y8G("routerLink",e.eq3(19,v,t.id)),e.R7$(),e.Y8G("src","https://image.tmdb.org/t/p/w500"+t.poster_path,e.B4B),e.R7$(2),e.SpI(" ",e.i5U(7,13,t.vote_average,"1.1-1")," "),e.R7$(4),e.JRh(t.title),e.R7$(3),e.SpI(" ",e.i5U(14,16,t.release_date,"MMM dd, yyyy")," "),e.R7$(2),e.AVh("fa-solid",n.isInWishlist(t.id))("fa-regular",!n.isInWishlist(t.id))("text-warning",n.isInWishlist(t.id))("text-muted",!n.isInWishlist(t.id))}}function b(i,g){if(1&i){const t=e.RV6();e.j41(0,"li",29)(1,"button",34),e.bIt("click",function(){const r=c.eBV(t).$implicit,o=e.XpG(2);return c.Njj(o.changePage(r))}),e.EFF(2),e.k0s()()}if(2&i){const t=g.$implicit,n=e.XpG(2);e.AVh("active",t===n.currentPage),e.R7$(2),e.SpI(" ",t," ")}}function x(i,g){if(1&i){const t=e.RV6();e.j41(0,"nav",27)(1,"ul",28)(2,"li",29)(3,"button",30),e.bIt("click",function(){c.eBV(t);const r=e.XpG();return c.Njj(r.changePage(r.currentPage-1))}),e.nrm(4,"i",31),e.EFF(5," Prev "),e.k0s()(),e.DNE(6,b,3,3,"li",32),e.j41(7,"li",29)(8,"button",30),e.bIt("click",function(){c.eBV(t);const r=e.XpG();return c.Njj(r.changePage(r.currentPage+1))}),e.EFF(9," Next "),e.nrm(10,"i",33),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.AVh("disabled",1===t.currentPage),e.R7$(4),e.Y8G("ngForOf",t.pages),e.R7$(),e.AVh("disabled",t.currentPage===t.totalPages)}}let O=(()=>{class i{http;_Fetch;wishlistService;movieService;MovieList=[];searchResults=[];searchTerm="";selectedGenreId="";genres=[];currentPage=1;totalPages=1;itemsPerPage=8;excludedGenreIds=[18,10749];API_KEY="943a1d14054f1dcc52c2bc72de292ab7";constructor(t,n,r,o){this.http=t,this._Fetch=n,this.wishlistService=r,this.movieService=o}ngOnInit(){this.loadGenres(),this.movieService.language$.subscribe(()=>{this.loadNowPlayingMovies(this.currentPage)})}get activeData(){return this.searchResults.length>0?this.searchResults:this.MovieList}get pages(){const n=Math.max(1,this.currentPage-Math.floor(3.5)),r=Math.min(this.totalPages,n+7-1);return Array.from({length:r-n+1},(o,a)=>n+a)}changePage(t){t<1||t>this.totalPages||(this.currentPage=t,this.searchTerm.trim().length>=2?this.performSearch(this.searchTerm,t):this.loadNowPlayingMovies(t))}loadNowPlayingMovies(t){this._Fetch.getMovies(t).subscribe({next:n=>{this.MovieList=this.filterMovies(n.results),this.totalPages=n.total_pages,this.searchResults=[]},error:n=>console.error("Error loading movies:",n)})}onSearchChange(){this.searchTerm.trim().length<2?this.clearSearch():this.performSearch(this.searchTerm,1)}performSearch(t,n){const r=encodeURIComponent(t);this.http.get(`https://api.themoviedb.org/3/search/movie?query=${r}&api_key=${this.API_KEY}&page=${n}`).subscribe({next:o=>{this.searchResults=this.filterMovies(o.results),this.totalPages=o.total_pages,this.currentPage=n},error:o=>console.error("Search error:",o)})}clearSearch(){this.searchTerm="",this.searchResults=[],this.currentPage=1,this.loadNowPlayingMovies(1)}loadGenres(){this.http.get(`https://api.themoviedb.org/3/genre/movie/list?api_key=${this.API_KEY}`).subscribe({next:t=>{this.genres=t.genres.filter(n=>!this.excludedGenreIds.includes(n.id))},error:t=>console.error("Failed to load genres",t)})}filterByGenre(){this.movieService.language$.subscribe(t=>{this.selectedGenreId?this.http.get(`https://api.themoviedb.org/3/discover/movie?with_genres=${this.selectedGenreId}&api_key=${this.API_KEY}&language=${t}&page=1`).subscribe({next:n=>{this.searchResults=this.filterMovies(n.results),this.totalPages=n.total_pages,this.currentPage=1},error:n=>console.error("Genre filter error:",n)}):this.searchTerm.trim()?this.performSearch(this.searchTerm,1):this.loadNowPlayingMovies(1)})}filterMovies(t){return t.filter(n=>!1===n?.adult&&!n.genre_ids?.some(r=>this.excludedGenreIds.includes(r)))}toggleWishlist(t){this.wishlistService.toggleWishlist(t)}isInWishlist(t){return this.wishlistService.isInWishlist(t)}static \u0275fac=function(n){return new(n||i)(e.rXU(m.Qq),e.rXU(u.F),e.rXU(p.F),e.rXU(f.W))};static \u0275cmp=e.VBU({type:i,selectors:[["app-home"]],decls:22,vars:6,consts:[[1,"bg-light","p-5","m-5","text-center","search-input"],[1,"d-flex","justify-content-center","mt-4"],[1,"position-relative","w-50"],["type","text","placeholder","Search and explore...",1,"form-control","me-2",3,"ngModelChange","input","ngModel"],[1,"btn","btn-warning","ms-2",3,"click"],[1,"container","mt-5"],[1,"d-flex","justify-content-between","align-items-center","mb-3","px-3"],[1,"fw-bold","mb-0"],[1,"genre-dropdown-wrapper",2,"width","200px"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],["class","mt-5 d-flex justify-content-center",4,"ngIf"],[3,"value"],[1,"col"],[1,"card","h-100","border-0","shadow-sm"],[1,"position-relative"],[3,"routerLink"],["alt","Movie Poster",1,"card-img-top",3,"src"],[1,"position-absolute","top-0","start-0","badge","bg-dark","text-warning","m-2","rounded-circle","p-2"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","mb-2"],[1,"d-flex","justify-content-between","align-items-center","mt-auto"],[1,"text-muted"],[1,"fa-heart","ms-3",2,"cursor","pointer","font-size","1.2rem",3,"click"],[1,"mt-5","d-flex","justify-content-center"],[1,"pagination","pagination-sm"],[1,"page-item"],[1,"page-link","text-dark",3,"click"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"page-link","fw-bold",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"section",0)(1,"h2"),e.EFF(2,"Welcome to our movie app"),e.k0s(),e.j41(3,"p"),e.EFF(4,"Millions of movies, TV shows and people to discover. Explore now."),e.k0s(),e.j41(5,"div",1)(6,"div",2)(7,"input",3),e.mxI("ngModelChange",function(a){return e.DH7(r.searchTerm,a)||(r.searchTerm=a),a}),e.bIt("input",function(){return r.onSearchChange()}),e.k0s()(),e.j41(8,"button",4),e.bIt("click",function(){return r.clearSearch()}),e.EFF(9,"Clear"),e.k0s()()(),e.j41(10,"section",5)(11,"div",6)(12,"h4",7),e.EFF(13),e.k0s(),e.j41(14,"div",8)(15,"select",9),e.mxI("ngModelChange",function(a){return e.DH7(r.selectedGenreId,a)||(r.selectedGenreId=a),a}),e.bIt("change",function(){return r.filterByGenre()}),e.j41(16,"option",10),e.EFF(17,"All Genres"),e.k0s(),e.DNE(18,P,2,2,"option",11),e.k0s()()(),e.j41(19,"div",12),e.DNE(20,M,16,21,"div",13),e.k0s()(),e.DNE(21,x,11,5,"nav",14)),2&n&&(e.R7$(7),e.R50("ngModel",r.searchTerm),e.R7$(6),e.SpI(" ",r.searchResults.length>0?"Search Results":"Now Playing"," "),e.R7$(2),e.R50("ngModel",r.selectedGenreId),e.R7$(3),e.Y8G("ngForOf",r.genres),e.R7$(2),e.Y8G("ngForOf",r.activeData),e.R7$(),e.Y8G("ngIf",r.totalPages>1))},dependencies:[h.MD,h.Sq,h.bT,h.QX,h.vh,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,_.iI,_.Wk],styles:["body[_ngcontent-%COMP%], [_nghost-%COMP%]{background:var(--bg-color);color:var(--text-color)}[_nghost-%COMP%]{transition:background .3s,color .3s}.search-input[_ngcontent-%COMP%]{background:var(--bg-color)!important;color:var(--text-color)!important;transition:background .3s,color .3s}.card-img-top[_ngcontent-%COMP%]{object-fit:fill}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.fa-heart[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.badge[_ngcontent-%COMP%]{font-size:.7rem;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;border-radius:12px;box-shadow:0 4px 8px #0000001a;overflow:hidden;transition:transform .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-body[_ngcontent-%COMP%]{height:25%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;text-align:center;padding:.5rem}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107;color:#212529;font-weight:700}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;border:1px solid #dee2e6;transition:all .3s ease}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#000}.fa-heart[_ngcontent-%COMP%]{margin-left:12px;transition:transform .2s ease-in-out;cursor:pointer}.fa-heart[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.genre-dropdown-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.genre-dropdown[_ngcontent-%COMP%]{background-color:#fff8e1;color:#212529;border:1px solid #ffc107;border-radius:6px;transition:border-color .3s ease,box-shadow .3s ease;width:auto;min-width:180px;font-weight:500}.genre-dropdown[_ngcontent-%COMP%]:hover{border-color:#ffca2c;box-shadow:0 0 0 .2rem #ffc10740;cursor:pointer}.genre-dropdown[_ngcontent-%COMP%]:focus{border-color:#ffb300;outline:none;box-shadow:0 0 0 .2rem #ffc10766}"]})}return i})()}}]);